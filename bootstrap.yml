---
- hosts: all
  sudo: yes
  vars_files:
    - vars/main.yml

  pre_tasks:
  - name: create admin users
    include: playbooks/createAdminUsers.yml

  - name: mount Ramdisk as /tmp
    mount: name=/tmp
           src=tmpfs
           fstype=tmpfs
           opts="size=512m,nodev,nosuid,noexec"
           state=mounted

  - name: set timezone
    file: src=/usr/share/zoneinfo/Europe/Brussels  dest=/etc/localtime state=link force=yes

  roles:
     - security_level1
     - docker
     - git
     - nginx

  tasks:

  - name: ensure ntpd is at the latest version
    yum: pkg=ntp state=latest
    notify:
    - restart ntpd

  handlers:
    - name: restart ntpd
      service: name=ntpd state=restarted